RewriteEngine On

# ── Security ─────────────────────────────────────────────

# Deny access to config/ and includes/ directories
RewriteRule ^config(/|$) - [F,L]
RewriteRule ^includes(/|$) - [F,L]

# Deny access to hidden files (.git, .gitattributes, .htaccess in subdirs, etc.)
RewriteRule (^|/)\.(?!htaccess$) - [F,L]

# Disable directory listing
Options -Indexes

# Prevent clickjacking, XSS, MIME sniffing
<IfModule mod_headers.c>
    Header set X-Content-Type-Options "nosniff"
    Header set X-Frame-Options "SAMEORIGIN"
    Header set X-XSS-Protection "1; mode=block"
    Header set Referrer-Policy "strict-origin-when-cross-origin"
</IfModule>

# ── Routing ──────────────────────────────────────────────

# If file or directory exists, serve it directly
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Route everything else to index.php
RewriteRule ^$ index.php [L]
